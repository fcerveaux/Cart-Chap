<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cart'chap — Éditeur</title>
<link rel="stylesheet" href="styles.css"/>
<link rel="icon" href="assets/logo.svg">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; media-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self'; frame-src 'none'; connect-src 'self'; base-uri 'none'; frame-ancestors 'none'">
</head>
<body class="cc-shell">
<header class="cc-topbar">
<a href="./" class="cc-back">← Accueil</a>
<h1>Éditeur — Cart'chap</h1>
</header>


<main class="cc-container">
<section class="cc-panel">
<h2>Infos du jeu</h2>
<label>Titre <input id="title" placeholder="Titre du jeu"></label>
<label>Discipline <input id="subject" placeholder="Ex: Histoire"></label>
<label>Durée estimée (min) <input id="duration" type="number" min="1" step="1"></label>
</section>


<section class="cc-panel">
<div class="cc-row">
<h2>Cartes</h2>
<button id="addCard" class="cc-btn">+ Ajouter une carte</button>
</div>
<ul id="cards" class="cc-cards"></ul>
</section>


<section class="cc-panel cc-actions">
<button id="importBtn" class="cc-btn ghost">Importer (.escape.json)</button>
<button id="downloadBtn" class="cc-btn">Télécharger (.escape.json)</button>
<button id="shareHashBtn" class="cc-btn">Générer lien (hash)</button>
<button id="exportLoaderBtn" class="cc-btn">Exporter loader (HTML court)</button>
<button id="qrBtn" class="cc-btn ghost">QR du lien</button>
<input type="file" id="fileInput" accept="application/json" hidden>
</section>


<section id="shareOut" class="cc-panel" hidden>
<h2>Partage</h2>
<p><strong>Lien :</strong> <input id="shareLink" class="cc-input" readonly> <button id="copyLink" class="cc-btn">Copier</button></p>
<div id="qr" class="cc-qr"></div>
</section>


<dialog id="leaveWarn" class="cc-dialog">
<h3>Attention</h3>
<p>Si vous n'avez pas téléchargé votre fichier, vos modifications seront perdues.</p>
<menu>
<button id="stayBtn" class="cc-btn">Rester sur la page</button>
<button id="leaveBtn" class="cc-btn danger">Fermer la page</button>
</menu>
</dialog>


</main>


<script src="js/app-common.js"></script>
<script src="js/editor.js"></script>
</body>
</html>
